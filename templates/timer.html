{% extends "layout.html" %}
{% block content %}
<div class="glass-panel" style="max-width: 800px; margin: 50px auto; text-align: center;">
    <h2>Match Timer</h2>
    <!-- Video Timer -->
    <div style="position: relative; width: 100%; padding-top: 56.25%; background: black; margin-bottom: 20px;">
        <video id="timer-video" src="{{ url_for('static', filename='TIMER.mp4') }}"
            style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" playsinline></video>
        <div id="click-overlay" onclick="initAudio()"
            style="position: absolute; top:0; left:0; width:100%; height:100%; z-index: 10; cursor: pointer; display: flex; align-items: center; justify-content: center; color: white; background: rgba(0,0,0,0.3);">
            <h3>Click here to enable audio</h3>
        </div>
    </div>
    <div style="background: rgba(0,255,0,0.1); padding: 10px; margin-bottom: 20px; border-radius: 5px; color: #4caf50;">
        <i class="fa-solid fa-check-circle"></i> Tables Ready: <span id="ready-count"
            style="font-weight: bold; font-size: 1.2em;">0</span>
    </div>
    <div class="controls">
        <button onclick="startTimer()" class="btn btn-primary">Start</button>
        <button onclick="stopTimer()" class="btn btn-secondary">Stop</button>
        <button onclick="resetTimer()" class="btn btn-danger">Reset</button>
    </div>

    <!-- Remote Control Info -->
    <div
        style="margin-top: 30px; text-align: left; background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px; font-size: 0.9em;">
        <h4 style="margin-top: 0;">Remote Control URLs</h4>
        <p>Trigger the timer from external devices/scripts using these URLs (replace <code>USER</code> and
            <code>PASS</code> with admin credentials):</p>

        <div style="margin-bottom: 10px;">
            <strong>Start:</strong><br>
            <code
                style="word-break: break-all; user-select: all;">http://{{ ip_address }}:5000/api/remote/timer?action=start&username=USER&password=PASS</code>
        </div>

        <div style="margin-bottom: 10px;">
            <strong>Stop:</strong><br>
            <code
                style="word-break: break-all; user-select: all;">http://{{ ip_address }}:5000/api/remote/timer?action=stop&username=USER&password=PASS</code>
        </div>

        <div>
            <strong>Reset:</strong><br>
            <code
                style="word-break: break-all; user-select: all;">http://{{ ip_address }}:5000/api/remote/timer?action=reset&username=USER&password=PASS</code>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/timer.js') }}"></script>
{% endblock %}