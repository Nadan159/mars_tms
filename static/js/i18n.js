var translations = {
    "en": {
        "title": "FLL UNEARTHED SCORER",
        "home": "Home",
        "timer": "Timer",
        "scorer": "Scorer",
        "scoreboard": "Scoreboard",
        "judging": "Judging",
        "admin": "Admin",
        "logout": "Logout",
        "team": "Team",
        "submit_score": "Submit Score",
        "total_score": "Total Score",
        "reset": "Reset",
        "yes": "Yes",
        "no": "No",

        "eib_title": "Equipment Inspection",
        "eib_desc": "Robot and all equipment fit completely in one launch area and under 12 in (305 mm)?",

        "m01_title": "M01 Surface Brushing",
        "m01_desc1": "Number of soil deposits completely cleared and touching the mat:",
        "m01_desc2": "Archaeologist's brush is NOT touching the dig site:",

        "m02_title": "M02 Map Reveal",
        "m02_desc": "Number of topsoil sections completely cleared:",

        "m03_title": "M03 Mineshaft Explorer",
        "m03_desc1": "Your minecart is on the opposing team's field:",
        "m03_desc2": "Bonus: Opposing team's minecart is on your field:",

        "m04_title": "M04 Careful Recovery",
        "m04_desc1": "Precious artifact is not touching the mine:",
        "m04_desc2": "Both support structures are standing:",

        "m05_title": "M05 Who Lived Here?",
        "m05_desc": "Structure floor is completely upright:",

        "m06_title": "M06 Forge",
        "m06_desc": "Number of ore blocks not touching the forge:",

        "m07_title": "M07 Heavy Lifting",
        "m07_desc": "Millstone is no longer touching its base:",

        "m08_title": "M08 Silo",
        "m08_desc": "Number of preserved pieces outside the silo:",

        "m09_title": "M09 What's On Sale?",
        "m09_desc1": "Roof is completely raised:",
        "m09_desc2": "Wares are raised:",

        "m10_title": "M10 Tip the Scales",
        "m10_desc1": "Scale is tipped and touching the mat:",
        "m10_desc2": "Scale pan is completely removed:",

        "m11_title": "M11 Angler Artifacts",
        "m11_desc1": "Artifacts are raised above ground level:",
        "m11_desc2": "Bonus: Crane flag is at least partly lowered:",

        "m12_title": "M12 Salvage Operation",
        "m12_desc1": "Sand is completely cleared:",
        "m12_desc2": "Ship is completely raised:",

        "m13_title": "M13 Statue Rebuild",
        "m13_desc": "Statue is completely raised:",

        "m14_title": "M14 Forum",
        "m14_desc": "Check all objects touching the mat and at least partly in the Forum:",
        "m14_opt_brush": "Brush",
        "m14_opt_opp_cart": "Opposing Minecart",
        "m14_opt_pan": "Scale Pan",
        "m14_opt_topsoil": "Topsoil",
        "m14_opt_ore": "Ore with Fossil",
        "m14_opt_artifact": "Precious Artifact",
        "m14_opt_millstone": "Millstone",

        "m15_title": "M15 Site Marking",
        "m15_desc": "Number of sites where a flag is at least partly inside and touching the mat:",

        "pt_title": "Precision Tokens",
        "pt_desc": "Number of precision tokens remaining:"
    },
    "he": {
        "title": "מחשבון ניקוד FLL UNEARTHED",
        "home": "בית",
        "timer": "שעון",
        "scorer": "ניקוד",
        "scoreboard": "לוח תוצאות",
        "judging": "שיפוט",
        "admin": "ניהול",
        "logout": "התנתק",
        "team": "קבוצה",
        "submit_score": "שלח ניקוד",
        "total_score": "ניקוד סופי",
        "reset": "אפס",
        "yes": "כן",
        "no": "לא",

        "eib_title": "ביקורת ציוד",
        "eib_desc": "הרובוט וכל הציוד שלכם נכנסים לחלוטין לתוך אחד מאזורי השיגור והגובה שלהם הוא מתחת ל-305 מ״מ (12 אינץ׳) במהלך הביקורת:",

        "m01_title": "M01 ניקוי משטחים",
        "m01_desc1": "מספר משקעי האדמה שנוקו לחלוטין, ונוגעים בשטיח המשחק:",
        "m01_desc2": "המברשת של הארכיאולוגים אינה נוגעת באתר החפירה:",

        "m02_title": "M02 חשיפת מפה",
        "m02_desc": "מספר מקטעי שכבת קרקע העליונה שהוסטו לחלוטין:",

        "m03_title": "M03 חוקרת מכרות",
        "m03_desc1": "עגלת המכרות שלכם נמצאת במגרש של הקבוצה השנייה:",
        "m03_desc2": "בונוס: עגלת המכרות של הקבוצה השנייה נמצאת במגרש שלכם:",

        "m04_title": "M04 חילוץ זהיר",
        "m04_desc1": "החפץ יקר הערך אינו נוגע במכרה:",
        "m04_desc2": "שני מבני התמך עומדים:",

        "m05_title": "M05 מי חיו כאן?",
        "m05_desc": "רצפת המבנה פונה לחלוטין כלפי מעלה:",

        "m06_title": "M06 נפחייה",
        "m06_desc": "מספר גושי העפרה שאינם נוגעים בנפחייה:",

        "m07_title": "M07 הרמת משאות כבדים",
        "m07_desc": "אבן הרחיים כבר לא נוגעת בבסיס שלה:",

        "m08_title": "M08 ממגורה",
        "m08_desc": "מספר הפיסות המשומרות שנמצאות מחוץ לממגורה:",

        "m09_title": "M09 מה מוכרים פה?",
        "m09_desc1": "הסככה מורמת לחלוטין:",
        "m09_desc2": "הסחורה מורמת:",

        "m10_title": "M10 הטו את המאזניים",
        "m10_desc1": "המשקל מוטה ונוגע בשטיח:",
        "m10_desc2": "מגש המאזניים הוסר לחלוטין:",

        "m11_title": "M11 לדוג חפצים",
        "m11_desc1": "החפצים מורמים מעל לפני הקרקע:",
        "m11_desc2": "בונוס: דגל המנוף התקרב למנוף לפחות חלקית:",

        "m12_title": "M12 מבצע הצלה",
        "m12_desc1": "החול נוקה לחלוטין:",
        "m12_desc2": "האונייה הורמה לחלוטין:",

        "m13_title": "M13 שחזור פסל",
        "m13_desc": "הפסל מורם לחלוטין:",

        "m14_title": "M14 פורום",
        "m14_desc": "סמנו את כל החפצים הנוגעים בשטיח ונמצאים לפחות חלקית בפורום:",
        "m14_opt_brush": "מברשת",
        "m14_opt_opp_cart": "עגלת מכרות של הקבוצה השנייה",
        "m14_opt_pan": "מגש מאזניים",
        "m14_opt_topsoil": "שכבת קרקע עליונה",
        "m14_opt_ore": "גוש עפרה עם חפץ מאובן",
        "m14_opt_artifact": "חפץ יקר ערך",
        "m14_opt_millstone": "אבן רחיים",

        "m15_title": "M15 סימון אתרים",
        "m15_desc": "מספר האתרים בהם דגל נמצא לפחות חלקית בפנים ונוגע בשטיח:",

        "pt_title": "אסימוני דיוק",
        "pt_desc": "מספר אסימוני הדיוק הנותרים הוא:"
    }
};

function updateLanguage(lang) {
    document.documentElement.lang = lang;
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang][key]) {
            el.innerText = translations[lang][key];
        } else {
            // Fallback or leave as is
        }
    });

    if (lang === 'he') {
        document.body.dir = 'rtl';
    } else {
        document.body.dir = 'ltr';
    }
    localStorage.setItem('fll_lang', lang);
}

document.addEventListener('DOMContentLoaded', () => {
    const savedLang = localStorage.getItem('fll_lang') || 'en';
    const selector = document.getElementById('lang-select');
    if (selector) {
        selector.value = savedLang;
        updateLanguage(savedLang);
    }
});
